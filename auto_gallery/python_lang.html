<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Import libraries &#8212; Statistics and Machine Learning in Python 0.8 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <script src="../_static/documentation_options.js?v=a0e24af7"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Statistics and Machine Learning in Python 0.8 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Numpy: Arrays and Matrices" href="data_numpy.html" />
    <link rel="prev" title="Introduction to Python language" href="../introduction/introduction_python_for_datascience.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-gallery-python-lang-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code.</p>
</div>
<p class="sphx-glr-example-title" id="sphx-glr-auto-gallery-python-lang-py">Source  <a class="reference external" href="https://github.com/justmarkham/python-reference">Kevin Markham</a></p>
<section id="import-libraries">
<h1>Import libraries<a class="headerlink" href="#import-libraries" title="Link to this heading">¶</a></h1>
<p>‘generic import’ of math module</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>5.0
</pre></div>
</div>
<p>import a function</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">sqrt</span>
<span class="n">sqrt</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>    <span class="c1"># no longer have to reference the module</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>5.0
</pre></div>
</div>
<p>import multiple functions at once</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">sqrt</span><span class="p">,</span> <span class="n">exp</span>
</pre></div>
</div>
<p>import all functions in a module (strongly discouraged)</p>
<p>from os import *</p>
<p>define an alias</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">nltk</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>np.float64(3.0)
</pre></div>
</div>
<p>show all functions in math module</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">content</span> <span class="o">=</span> <span class="nb">dir</span><span class="p">(</span><span class="n">math</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="basic-operations">
<h1>Basic operations<a class="headerlink" href="#basic-operations" title="Link to this heading">¶</a></h1>
<p>Numbers</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="mi">10</span> <span class="o">+</span> <span class="mi">4</span>          <span class="c1"># add (returns 14)</span>
<span class="mi">10</span> <span class="o">-</span> <span class="mi">4</span>          <span class="c1"># subtract (returns 6)</span>
<span class="mi">10</span> <span class="o">*</span> <span class="mi">4</span>          <span class="c1"># multiply (returns 40)</span>
<span class="mi">10</span> <span class="o">**</span> <span class="mi">4</span>         <span class="c1"># exponent (returns 10000)</span>
<span class="mi">10</span> <span class="o">/</span> <span class="mi">4</span>          <span class="c1"># divide (returns 2 because both types are &#39;int&#39;)</span>
<span class="mi">10</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>   <span class="c1"># divide (returns 2.5)</span>
<span class="mi">5</span> <span class="o">%</span> <span class="mi">4</span>           <span class="c1"># modulo (returns 1) - also known as the remainder</span>
<span class="mi">10</span> <span class="o">/</span> <span class="mi">4</span>          <span class="c1"># true division (returns 2.5)</span>
<span class="mi">10</span> <span class="o">//</span> <span class="mi">4</span>         <span class="c1"># floor division (returns 2)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
<p>Boolean operations</p>
<p>comparisons (these return True)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="o">&gt;</span> <span class="mi">3</span>
<span class="mi">5</span> <span class="o">&gt;=</span> <span class="mi">3</span>
<span class="mi">5</span> <span class="o">!=</span> <span class="mi">3</span>
<span class="mi">5</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p>Boolean operations (these return True)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="mi">5</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="mi">6</span> <span class="o">&gt;</span> <span class="mi">3</span>
<span class="mi">5</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="ow">or</span> <span class="mi">5</span> <span class="o">&lt;</span> <span class="mi">3</span>
<span class="ow">not</span> <span class="kc">False</span>
<span class="kc">False</span> <span class="ow">or</span> <span class="ow">not</span> <span class="kc">False</span> <span class="ow">and</span> <span class="kc">True</span>     <span class="c1"># evaluation order: not, and, or</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</section>
<section id="data-types">
<h1>Data types<a class="headerlink" href="#data-types" title="Link to this heading">¶</a></h1>
<p>Determine the type of an object</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>         <span class="c1"># returns &#39;int&#39;</span>
<span class="nb">type</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>       <span class="c1"># returns &#39;float&#39;</span>
<span class="nb">type</span><span class="p">(</span><span class="s1">&#39;two&#39;</span><span class="p">)</span>     <span class="c1"># returns &#39;str&#39;</span>
<span class="nb">type</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>      <span class="c1"># returns &#39;bool&#39;</span>
<span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>      <span class="c1"># returns &#39;NoneType&#39;</span>
</pre></div>
</div>
<p>Check if an object is of a given type</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">isinstance</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>            <span class="c1"># returns False</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span>   <span class="c1"># returns True</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p>Convert an object to a given type</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">float</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">int</span><span class="p">(</span><span class="mf">2.9</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="mf">2.9</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;2.9&#39;
</pre></div>
</div>
<p>zero, None, and empty containers are converted to False</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">bool</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="nb">bool</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>    <span class="c1"># empty string</span>
<span class="nb">bool</span><span class="p">([])</span>    <span class="c1"># empty list</span>
<span class="nb">bool</span><span class="p">({})</span>    <span class="c1"># empty dictionary</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
<p>Non-empty containers and non-zeros are converted to True</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">bool</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="nb">bool</span><span class="p">(</span><span class="s1">&#39;two&#39;</span><span class="p">)</span>
<span class="nb">bool</span><span class="p">([</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<section id="lists">
<h2>Lists<a class="headerlink" href="#lists" title="Link to this heading">¶</a></h2>
<p>Different objects categorized along a certain ordered sequence, lists
are ordered, iterable, mutable (adding or removing objects changes the
list size), can contain multiple data types.</p>
<p>Creation</p>
<p>Empty list (two ways)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">empty_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">empty_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
</pre></div>
</div>
<p>List with values</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;homer&#39;</span><span class="p">,</span> <span class="s1">&#39;marge&#39;</span><span class="p">,</span> <span class="s1">&#39;bart&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Examine a list</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>     <span class="c1"># print element 0 (&#39;homer&#39;)</span>
<span class="nb">len</span><span class="p">(</span><span class="n">simpsons</span><span class="p">)</span>   <span class="c1"># returns the length (3)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>3
</pre></div>
</div>
<p>Modify a list (does not return the list)</p>
<p>Append</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;lisa&#39;</span><span class="p">)</span>                 <span class="c1"># append element to end</span>
<span class="n">simpsons</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s1">&#39;itchy&#39;</span><span class="p">,</span> <span class="s1">&#39;scratchy&#39;</span><span class="p">])</span>  <span class="c1"># append multiple elements to end</span>
<span class="c1"># insert element at index 0 (shifts everything right)</span>
</pre></div>
</div>
<p>Insert</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;maggie&#39;</span><span class="p">)</span>
<span class="c1"># searches for first instance and removes it</span>
</pre></div>
</div>
<p>Remove</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;bart&#39;</span><span class="p">)</span>
<span class="n">simpsons</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                         <span class="c1"># removes element 0 and returns it</span>
<span class="c1"># removes element 0 (does not return it)</span>
<span class="k">del</span> <span class="n">simpsons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">simpsons</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;krusty&#39;</span>                  <span class="c1"># replace element 0</span>
</pre></div>
</div>
<p>Concatenate lists (slower than ‘extend’ method)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">neighbors</span> <span class="o">=</span> <span class="n">simpsons</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;ned&#39;</span><span class="p">,</span> <span class="s1">&#39;rod&#39;</span><span class="p">,</span> <span class="s1">&#39;todd&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>Replicate</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">rep</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Find elements in a list</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;lisa&#39;</span> <span class="ow">in</span> <span class="n">simpsons</span>
<span class="n">simpsons</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s1">&#39;lisa&#39;</span><span class="p">)</span>      <span class="c1"># counts the number of instances</span>
<span class="n">simpsons</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;itchy&#39;</span><span class="p">)</span>     <span class="c1"># returns index of first instance</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
<p>List slicing (selection) <code class="docutils literal notranslate"><span class="pre">[start:end:stride]</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">weekdays</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mon&#39;</span><span class="p">,</span> <span class="s1">&#39;tues&#39;</span><span class="p">,</span> <span class="s1">&#39;wed&#39;</span><span class="p">,</span> <span class="s1">&#39;thurs&#39;</span><span class="p">,</span> <span class="s1">&#39;fri&#39;</span><span class="p">]</span>
<span class="n">weekdays</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>         <span class="c1"># element 0</span>
<span class="n">weekdays</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>       <span class="c1"># elements 0, 1, 2</span>
<span class="n">weekdays</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>        <span class="c1"># elements 0, 1, 2</span>
<span class="n">weekdays</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>        <span class="c1"># elements 3, 4</span>
<span class="n">weekdays</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>        <span class="c1"># last element (element 4)</span>
<span class="n">weekdays</span><span class="p">[::</span><span class="mi">2</span><span class="p">]</span>       <span class="c1"># every 2nd element (0, 2, 4)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;mon&#39;, &#39;wed&#39;, &#39;fri&#39;]
</pre></div>
</div>
<p>Reverse list</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">weekdays</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>      <span class="c1"># backwards (4, 3, 2, 1, 0)</span>
<span class="c1"># alternative method for returning the list backwards</span>
<span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">weekdays</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;fri&#39;, &#39;thurs&#39;, &#39;wed&#39;, &#39;tues&#39;, &#39;mon&#39;]
</pre></div>
</div>
<p>Sort list</p>
<p>Sort a list in place (modifies but does not return the list)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="n">simpsons</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>     <span class="c1"># sort in reverse</span>
<span class="n">simpsons</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>          <span class="c1"># sort by a key</span>
</pre></div>
</div>
<p>Return a sorted list (but does not modify the original list)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">sorted</span><span class="p">(</span><span class="n">simpsons</span><span class="p">)</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">simpsons</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">sorted</span><span class="p">(</span><span class="n">simpsons</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;lisa&#39;, &#39;itchy&#39;, &#39;krusty&#39;, &#39;scratchy&#39;]
</pre></div>
</div>
</section>
<section id="tuples">
<h2>Tuples<a class="headerlink" href="#tuples" title="Link to this heading">¶</a></h2>
<p>Like lists, but their size cannot change: ordered, iterable, immutable,
can contain multiple data types</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a tuple</span>
<span class="n">digits</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">)</span>          <span class="c1"># create a tuple directly</span>
<span class="n">digits</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">])</span>   <span class="c1"># create a tuple from a list</span>
<span class="c1"># trailing comma is required to indicate it&#39;s a tuple</span>
<span class="n">zero</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,)</span>

<span class="c1"># examine a tuple</span>
<span class="n">digits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>           <span class="c1"># returns &#39;two&#39;</span>
<span class="nb">len</span><span class="p">(</span><span class="n">digits</span><span class="p">)</span>         <span class="c1"># returns 3</span>
<span class="n">digits</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>     <span class="c1"># counts the number of instances of that value (1)</span>
<span class="n">digits</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="c1"># returns the index of the first instance of that value (1)</span>

<span class="c1"># elements of a tuple cannot be modified</span>
<span class="c1"># digits[2] = 2       # throws an error</span>

<span class="c1"># concatenate tuples</span>
<span class="n">digits</span> <span class="o">=</span> <span class="n">digits</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="c1"># create a single tuple with elements repeated (also works with lists)</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>          <span class="c1"># returns (3, 4, 3, 4)</span>

<span class="c1"># tuple unpacking</span>
<span class="n">bart</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;male&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;simpson&#39;</span><span class="p">)</span>  <span class="c1"># create a tuple</span>
</pre></div>
</div>
</section>
<section id="strings">
<h2>Strings<a class="headerlink" href="#strings" title="Link to this heading">¶</a></h2>
<p>A sequence of characters, they are iterable, immutable</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a string</span>
<span class="n">s</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>         <span class="c1"># convert another data type into a string</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;I like you&#39;</span>

<span class="c1"># examine a string</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>                <span class="c1"># returns &#39;I&#39;</span>
<span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>              <span class="c1"># returns 10</span>

<span class="c1"># string slicing like lists</span>
<span class="n">s</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>               <span class="c1"># returns &#39;I like&#39;</span>
<span class="n">s</span><span class="p">[</span><span class="mi">7</span><span class="p">:]</span>               <span class="c1"># returns &#39;you&#39;</span>
<span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>               <span class="c1"># returns &#39;u&#39;</span>

<span class="c1"># basic string methods (does not modify the original string)</span>
<span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>           <span class="c1"># returns &#39;i like you&#39;</span>
<span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>           <span class="c1"># returns &#39;I LIKE YOU&#39;</span>
<span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;I&#39;</span><span class="p">)</span>   <span class="c1"># returns True</span>
<span class="n">s</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;you&#39;</span><span class="p">)</span>   <span class="c1"># returns True</span>
<span class="n">s</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span>         <span class="c1"># returns False (True if every character is a digit)</span>
<span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;like&#39;</span><span class="p">)</span>      <span class="c1"># returns index of first occurrence</span>
<span class="n">s</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;hate&#39;</span><span class="p">)</span>      <span class="c1"># returns -1 since not found</span>
<span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;like&#39;</span><span class="p">,</span> <span class="s1">&#39;love&#39;</span><span class="p">)</span>    <span class="c1"># replaces all instances of &#39;like&#39; with &#39;love&#39;</span>

<span class="c1"># split a string into a list of substrings separated by a delimiter</span>
<span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>        <span class="c1"># returns [&#39;I&#39;,&#39;like&#39;,&#39;you&#39;]</span>
<span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>           <span class="c1"># same thing</span>
<span class="n">s2</span> <span class="o">=</span> <span class="s1">&#39;a, an, the&#39;</span>
<span class="n">s2</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>       <span class="c1"># returns [&#39;a&#39;,&#39; an&#39;,&#39; the&#39;]</span>

<span class="c1"># join a list of strings into one string using a delimiter</span>
<span class="n">stooges</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;larry&#39;</span><span class="p">,</span> <span class="s1">&#39;curly&#39;</span><span class="p">,</span> <span class="s1">&#39;moe&#39;</span><span class="p">]</span>
<span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stooges</span><span class="p">)</span>   <span class="c1"># returns &#39;larry curly moe&#39;</span>

<span class="c1"># concatenate strings</span>
<span class="n">s3</span> <span class="o">=</span> <span class="s1">&#39;The meaning of life is&#39;</span>
<span class="n">s4</span> <span class="o">=</span> <span class="s1">&#39;42&#39;</span>
<span class="n">s3</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">s4</span>       <span class="c1"># returns &#39;The meaning of life is 42&#39;</span>
<span class="n">s3</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># same thing</span>

<span class="c1"># remove whitespace from start and end of a string</span>
<span class="n">s5</span> <span class="o">=</span> <span class="s1">&#39;  ham and cheese  &#39;</span>
<span class="n">s5</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>          <span class="c1"># returns &#39;ham and cheese&#39;</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>&#39;ham and cheese&#39;
</pre></div>
</div>
<p>Strings formatting</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># string substitutions: all of these return &#39;raining cats and dogs&#39;</span>
<span class="s1">&#39;raining </span><span class="si">%s</span><span class="s1"> and </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;cats&#39;</span><span class="p">,</span> <span class="s1">&#39;dogs&#39;</span><span class="p">)</span>                       <span class="c1"># old way</span>
<span class="s1">&#39;raining </span><span class="si">{}</span><span class="s1"> and </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;cats&#39;</span><span class="p">,</span> <span class="s1">&#39;dogs&#39;</span><span class="p">)</span>                   <span class="c1"># new way</span>
<span class="s1">&#39;raining </span><span class="si">{arg1}</span><span class="s1"> and </span><span class="si">{arg2}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">arg1</span><span class="o">=</span><span class="s1">&#39;cats&#39;</span><span class="p">,</span> <span class="n">arg2</span><span class="o">=</span><span class="s1">&#39;dogs&#39;</span><span class="p">)</span>  <span class="c1"># named arguments</span>

<span class="c1"># String formatting</span>
<span class="c1"># See: https://realpython.com/python-formatted-output/</span>
<span class="c1"># Old method</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;6 </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;bananas&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> cost $</span><span class="si">%.1f</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;bananas&#39;</span><span class="p">,</span> <span class="mf">3.14159</span><span class="p">))</span>

<span class="c1"># Format method positional arguments</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> </span><span class="si">{1}</span><span class="s1"> cost $</span><span class="si">{2:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;bananas&#39;</span><span class="p">,</span> <span class="mf">3.14159</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>6 bananas
6 bananas cost $3.1
6 bananas cost $3.1
</pre></div>
</div>
<p><a class="reference external" href="https://towardsdatascience.com/byte-string-unicode-string-raw-string-a-guide-to-all-strings-in-python-684c4c4960ba">Strings encoding</a></p>
<p>Normal strings allow for escaped characters. The default strings use unicode string (u string)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;first line</span><span class="se">\n</span><span class="s1">second line&#39;</span><span class="p">)</span>  <span class="c1"># or</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;first line</span><span class="se">\n</span><span class="s1">second line&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;first line</span><span class="se">\n</span><span class="s1">second line&#39;</span> <span class="o">==</span> <span class="sa">u</span><span class="s1">&#39;first line</span><span class="se">\n</span><span class="s1">second line&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>first line
second line
first line
second line
True
</pre></div>
</div>
<p>Raw strings treat backslashes as literal characters</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;first line\nfirst line&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;first line</span><span class="se">\n</span><span class="s1">second line&#39;</span> <span class="o">==</span> <span class="sa">r</span><span class="s1">&#39;first line\nsecond line&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>first line\nfirst line
False
</pre></div>
</div>
<p>Sequence of bytes are not strings, should be decoded before some operations</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;first line</span><span class="se">\n</span><span class="s1">second line&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>b&#39;first line\nsecond line&#39;
[&#39;first&#39;, &#39;line&#39;, &#39;second&#39;, &#39;line&#39;]
</pre></div>
</div>
</section>
<section id="dictionaries">
<h2>Dictionaries<a class="headerlink" href="#dictionaries" title="Link to this heading">¶</a></h2>
<p><strong>Dictionary is the must-known data structure</strong>.
Dictionaries are structures which can contain multiple data types, and
is ordered with key-value pairs: for each (unique) key, the dictionary
outputs one value. Keys can be strings, numbers, or tuples, while the
corresponding values can be any Python object. Dictionaries are:
unordered, iterable, mutable</p>
<p>Creation</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Empty dictionary (two ways)</span>
<span class="n">empty_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">empty_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">simpsons_roles_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Homer&#39;</span><span class="p">:</span> <span class="s1">&#39;father&#39;</span><span class="p">,</span> <span class="s1">&#39;Marge&#39;</span><span class="p">:</span> <span class="s1">&#39;mother&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;Bart&#39;</span><span class="p">:</span> <span class="s1">&#39;son&#39;</span><span class="p">,</span> <span class="s1">&#39;Lisa&#39;</span><span class="p">:</span> <span class="s1">&#39;daughter&#39;</span><span class="p">,</span> <span class="s1">&#39;Maggie&#39;</span><span class="p">:</span> <span class="s1">&#39;daughter&#39;</span><span class="p">}</span>

<span class="n">simpsons_roles_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Homer</span><span class="o">=</span><span class="s1">&#39;father&#39;</span><span class="p">,</span> <span class="n">Marge</span><span class="o">=</span><span class="s1">&#39;mother&#39;</span><span class="p">,</span>
                           <span class="n">Bart</span><span class="o">=</span><span class="s1">&#39;son&#39;</span><span class="p">,</span> <span class="n">Lisa</span><span class="o">=</span><span class="s1">&#39;daughter&#39;</span><span class="p">,</span> <span class="n">Maggie</span><span class="o">=</span><span class="s1">&#39;daughter&#39;</span><span class="p">)</span>

<span class="n">simpsons_roles_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="s1">&#39;Homer&#39;</span><span class="p">,</span> <span class="s1">&#39;father&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Marge&#39;</span><span class="p">,</span> <span class="s1">&#39;mother&#39;</span><span class="p">),</span>
                            <span class="p">(</span><span class="s1">&#39;Bart&#39;</span><span class="p">,</span> <span class="s1">&#39;son&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Lisa&#39;</span><span class="p">,</span> <span class="s1">&#39;daughter&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;Maggie&#39;</span><span class="p">,</span> <span class="s1">&#39;daughter&#39;</span><span class="p">)])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">simpsons_roles_dict</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;Homer&#39;: &#39;father&#39;, &#39;Marge&#39;: &#39;mother&#39;, &#39;Bart&#39;: &#39;son&#39;, &#39;Lisa&#39;: &#39;daughter&#39;, &#39;Maggie&#39;: &#39;daughter&#39;}
</pre></div>
</div>
<p>Access</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># examine a dictionary</span>
<span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="s1">&#39;Homer&#39;</span><span class="p">]</span>   <span class="c1"># &#39;father&#39;</span>
<span class="nb">len</span><span class="p">(</span><span class="n">simpsons_roles_dict</span><span class="p">)</span>       <span class="c1"># 5</span>
<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>     <span class="c1"># list: [&#39;Homer&#39;, &#39;Marge&#39;, ...]</span>
<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>   <span class="c1"># list:[&#39;father&#39;, &#39;mother&#39;, ...]</span>
<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>    <span class="c1"># list of tuples: [(&#39;Homer&#39;, &#39;father&#39;) ...]</span>
<span class="s1">&#39;Homer&#39;</span> <span class="ow">in</span> <span class="n">simpsons_roles_dict</span>  <span class="c1"># returns True</span>
<span class="s1">&#39;John&#39;</span> <span class="ow">in</span> <span class="n">simpsons_roles_dict</span>  <span class="c1"># returns False (only checks keys)</span>

<span class="c1"># accessing values more safely with &#39;get&#39;</span>
<span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="s1">&#39;Homer&#39;</span><span class="p">]</span>                       <span class="c1"># returns &#39;father&#39;</span>
<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;Homer&#39;</span><span class="p">)</span>                   <span class="c1"># same thing</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="s1">&#39;John&#39;</span><span class="p">]</span>               <span class="c1"># throws an error</span>
<span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">)</span>               <span class="c1"># None</span>
<span class="c1"># returns &#39;not found&#39; (the default)</span>
<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;not found&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Error &#39;John&#39;

&#39;not found&#39;
</pre></div>
</div>
<p>Modify a dictionary (does not return the dictionary)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="s1">&#39;Snowball&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;dog&#39;</span>              <span class="c1"># add a new entry</span>
<span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="s1">&#39;Snowball&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;cat&#39;</span>              <span class="c1"># add a new entry</span>
<span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="s1">&#39;Snoop&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;dog&#39;</span>                 <span class="c1"># edit an existing entry</span>
<span class="k">del</span> <span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="s1">&#39;Snowball&#39;</span><span class="p">]</span>                  <span class="c1"># delete an entry</span>

<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;Snoop&#39;</span><span class="p">)</span>  <span class="c1"># removes and returns (&#39;dog&#39;)</span>
<span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
    <span class="p">{</span><span class="s1">&#39;Mona&#39;</span><span class="p">:</span> <span class="s1">&#39;grandma&#39;</span><span class="p">,</span> <span class="s1">&#39;Abraham&#39;</span><span class="p">:</span> <span class="s1">&#39;grandpa&#39;</span><span class="p">})</span>  <span class="c1"># add multiple entries</span>
<span class="nb">print</span><span class="p">(</span><span class="n">simpsons_roles_dict</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;Homer&#39;: &#39;father&#39;, &#39;Marge&#39;: &#39;mother&#39;, &#39;Bart&#39;: &#39;son&#39;, &#39;Lisa&#39;: &#39;daughter&#39;, &#39;Maggie&#39;: &#39;daughter&#39;, &#39;Mona&#39;: &#39;grandma&#39;, &#39;Abraham&#39;: &#39;grandpa&#39;}
</pre></div>
</div>
<p>Intersecting two dictionaries</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons_ages_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Homer&#39;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;Marge&#39;</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span>
                      <span class="s1">&#39;Bart&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;Lisa&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Maggie&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">simpsons_ages_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="n">inter</span> <span class="o">=</span> <span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">simpsons_ages_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>

<span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">inter</span><span class="p">:</span>
    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">n</span><span class="p">,</span> <span class="n">simpsons_ages_dict</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="n">n</span><span class="p">]])</span>

<span class="p">[[</span><span class="n">n</span><span class="p">,</span> <span class="n">simpsons_ages_dict</span><span class="p">[</span><span class="n">n</span><span class="p">],</span> <span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="n">n</span><span class="p">]]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">inter</span><span class="p">]</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;Maggie&#39;, &#39;Marge&#39;, &#39;Homer&#39;, &#39;Lisa&#39;, &#39;Bart&#39;}

[[&#39;Maggie&#39;, 1, &#39;daughter&#39;], [&#39;Marge&#39;, 43, &#39;mother&#39;], [&#39;Homer&#39;, 45, &#39;father&#39;], [&#39;Lisa&#39;, 10, &#39;daughter&#39;], [&#39;Bart&#39;, 11, &#39;son&#39;]]
</pre></div>
</div>
<p>String substitution using a dictionary: syntax <code class="docutils literal notranslate"><span class="pre">%(key)format</span></code>, where <code class="docutils literal notranslate"><span class="pre">format</span></code>
is the formatting character e.g. <code class="docutils literal notranslate"><span class="pre">s</span></code> for string.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Homer is the </span><span class="si">%(Homer)s</span><span class="s1"> of the family&#39;</span> <span class="o">%</span> <span class="n">simpsons_roles_dict</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Homer is the father of the family
</pre></div>
</div>
</section>
<section id="sets">
<h2>Sets<a class="headerlink" href="#sets" title="Link to this heading">¶</a></h2>
<p>Like dictionaries, but with unique keys only (no corresponding values).
They are: unordered, iterable, mutable, can contain multiple data types
made up of unique elements (strings, numbers, or tuples)</p>
<p>Creation</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># create an empty set</span>
<span class="n">empty_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

<span class="c1"># create a set</span>
<span class="n">languages</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="s1">&#39;java&#39;</span><span class="p">}</span>         <span class="c1"># create a set directly</span>
<span class="n">snakes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s1">&#39;cobra&#39;</span><span class="p">,</span> <span class="s1">&#39;viper&#39;</span><span class="p">,</span> <span class="s1">&#39;python&#39;</span><span class="p">])</span>  <span class="c1"># create a set from a list</span>
</pre></div>
</div>
<p>Examine a set</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">languages</span><span class="p">)</span>              <span class="c1"># 3</span>
<span class="s1">&#39;python&#39;</span> <span class="ow">in</span> <span class="n">languages</span>       <span class="c1"># True</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p>Set operations</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">languages</span> <span class="o">&amp;</span> <span class="n">snakes</span>          <span class="c1"># intersection: {&#39;python&#39;}</span>
<span class="n">languages</span> <span class="o">|</span> <span class="n">snakes</span>          <span class="c1"># union: {&#39;cobra&#39;, &#39;r&#39;, &#39;java&#39;, &#39;viper&#39;, &#39;python&#39;}</span>
<span class="n">languages</span> <span class="o">-</span> <span class="n">snakes</span>          <span class="c1"># set difference: {&#39;r&#39;, &#39;java&#39;}</span>
<span class="n">snakes</span> <span class="o">-</span> <span class="n">languages</span>          <span class="c1"># set difference: {&#39;cobra&#39;, &#39;viper&#39;}</span>

<span class="c1"># modify a set (does not return the set)</span>
<span class="n">languages</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;sql&#39;</span><span class="p">)</span>        <span class="c1"># add a new element</span>
<span class="c1"># try to add an existing element (ignored, no error)</span>
<span class="n">languages</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">languages</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;java&#39;</span><span class="p">)</span>    <span class="c1"># remove an element</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">languages</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>   <span class="c1"># remove a non-existing element: throws an error</span>
<span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>

<span class="c1"># removes an element if present, but ignored otherwise</span>
<span class="n">languages</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="n">languages</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>             <span class="c1"># removes and returns an arbitrary element</span>
<span class="n">languages</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>           <span class="c1"># removes all elements</span>
<span class="n">languages</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s1">&#39;go&#39;</span><span class="p">,</span> <span class="s1">&#39;spark&#39;</span><span class="p">)</span>  <span class="c1"># add multiple elements (list or set)</span>

<span class="c1"># get a sorted list of unique elements from a list</span>
<span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">([</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>    <span class="c1"># returns [0, 1, 2, 9]</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Error &#39;c&#39;

[0, 1, 2, 9]
</pre></div>
</div>
</section>
</section>
<section id="execution-control-statements">
<h1>Execution control statements<a class="headerlink" href="#execution-control-statements" title="Link to this heading">¶</a></h1>
<section id="conditional-statements">
<h2>Conditional statements<a class="headerlink" href="#conditional-statements" title="Link to this heading">¶</a></h2>
<p>if statement</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;positive&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>positive
</pre></div>
</div>
<p>if/else statement</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;positive&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;zero or negative&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>positive
</pre></div>
</div>
<p>Single-line if/else statement, known as a ‘ternary operator’</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">sign</span> <span class="o">=</span> <span class="s1">&#39;positive&#39;</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;zero or negative&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sign</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>positive
</pre></div>
</div>
<p>if/elif/else statement</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;positive&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;zero&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;negative&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>positive
</pre></div>
</div>
</section>
<section id="loops">
<h2>Loops<a class="headerlink" href="#loops" title="Link to this heading">¶</a></h2>
<p>Loops are a set of instructions which repeat until termination
conditions are met. This can include iterating through all values in an
object, go through a range of values, etc</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># range returns a list of integers</span>
<span class="c1"># returns [0, 1, 2]: includes first value but excludes second value</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>        <span class="c1"># same thing: starting at zero is the default</span>
<span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># returns [0, 2, 4]: third argument specifies the &#39;stride&#39;</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>range(0, 5, 2)
</pre></div>
</div>
<p>Iterate on list values</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Apple&#39;</span><span class="p">,</span> <span class="s1">&#39;Banana&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruits</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fruit</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>APPLE
BANANA
CHERRY
</pre></div>
</div>
<p>Iterate with index</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fruits</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">fruits</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>apple
banana
cherry
</pre></div>
</div>
<p>Iterate with index and values: <code class="docutils literal notranslate"><span class="pre">enumerate</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fruits</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">val</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>

<span class="c1"># Use range when iterating over a large sequence to avoid actually</span>
<span class="c1"># creating the integer list in memory</span>
<span class="n">v</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="mi">6</span><span class="p">):</span>
    <span class="n">v</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>0 APPLE
1 BANANA
2 CHERRY
</pre></div>
</div>
</section>
</section>
<section id="list-comprehensions-iterators-etc">
<h1>List comprehensions, iterators, etc.<a class="headerlink" href="#list-comprehensions-iterators-etc" title="Link to this heading">¶</a></h1>
<section id="list-comprehensions">
<h2>List comprehensions<a class="headerlink" href="#list-comprehensions" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="http://python-3-patterns-idioms-test.readthedocs.io/en/latest/Comprehensions.html">List comprehensions</a>
provides an elegant syntax for the most common processing pattern:</p>
<ol class="arabic simple">
<li><p>iterate over a list,</p></li>
<li><p>apply some operation</p></li>
<li><p>store the result in a new list</p></li>
</ol>
<p>Classical iteration over a list</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nums</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="n">cubes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
    <span class="n">cubes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Equivalent list comprehension</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">cubes</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span><span class="o">**</span><span class="mi">3</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">]</span>    <span class="c1"># [1, 8, 27, 64, 125]</span>
</pre></div>
</div>
<p>Classical iteration over a list with <strong>if condition</strong>:
create a list of cubes of even numbers</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">cubes_of_even</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">cubes_of_even</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Equivalent list comprehension with <strong>if condition</strong>
syntax: <code class="docutils literal notranslate"><span class="pre">[expression</span> <span class="pre">for</span> <span class="pre">variable</span> <span class="pre">in</span> <span class="pre">iterable</span> <span class="pre">if</span> <span class="pre">condition]</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">cubes_of_even</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span><span class="o">**</span><span class="mi">3</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span> <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]</span>    <span class="c1"># [8, 64]</span>
</pre></div>
</div>
<p>Classical iteration over a list with <strong>if else condition</strong>:
for loop to cube even numbers and square odd numbers</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">cubes_and_squares</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">cubes_and_squares</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cubes_and_squares</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Equivalent list comprehension (using a ternary expression)
for loop to cube even numbers and square odd numbers
syntax: <code class="docutils literal notranslate"><span class="pre">[true_condition</span> <span class="pre">if</span> <span class="pre">condition</span> <span class="pre">else</span> <span class="pre">false_condition</span> <span class="pre">for</span> <span class="pre">variable</span> <span class="pre">in</span> <span class="pre">iterable]</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">cubes_and_squares</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span><span class="o">**</span><span class="mi">3</span> <span class="k">if</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">num</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">nums</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cubes_and_squares</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[1, 8, 9, 64, 25]
</pre></div>
</div>
<p>Nested loops: flatten a 2d-matrix</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">matrix</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]</span>
<span class="n">items</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
        <span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>Equivalent list comprehension with Nested loops</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">matrix</span>
         <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[1, 2, 3, 4]
</pre></div>
</div>
</section>
<section id="set-comprehension">
<h2>Set comprehension<a class="headerlink" href="#set-comprehension" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">fruits</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">,</span> <span class="s1">&#39;cherry&#39;</span><span class="p">]</span>
<span class="n">unique_lengths</span> <span class="o">=</span> <span class="p">{</span><span class="nb">len</span><span class="p">(</span><span class="n">fruit</span><span class="p">)</span> <span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruits</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unique_lengths</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{5, 6}
</pre></div>
</div>
</section>
<section id="dictionary-comprehension">
<h2>Dictionary comprehension<a class="headerlink" href="#dictionary-comprehension" title="Link to this heading">¶</a></h2>
<p>Create a dictionary from a list</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">fruit_lengths</span> <span class="o">=</span> <span class="p">{</span><span class="n">fruit</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">fruit</span><span class="p">)</span> <span class="k">for</span> <span class="n">fruit</span> <span class="ow">in</span> <span class="n">fruits</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fruit_lengths</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;apple&#39;: 5, &#39;banana&#39;: 6, &#39;cherry&#39;: 6}
</pre></div>
</div>
<p>Iterate over keys and values. Increase age of each subject:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons_ages_</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">simpsons_ages_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">simpsons_ages_</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;Homer&#39;: 46, &#39;Marge&#39;: 44, &#39;Bart&#39;: 12, &#39;Lisa&#39;: 11, &#39;Maggie&#39;: 2}
</pre></div>
</div>
<p>Combine two dictionaries sharing key. Example, a function that joins two dictionaries
(intersecting keys) into a dictionary of lists</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons_info_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="p">[</span><span class="n">simpsons_roles_dict</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="n">simpsons_ages_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]]</span>
                      <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">simpsons_roles_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span>
                      <span class="n">simpsons_ages_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
<span class="nb">print</span><span class="p">(</span><span class="n">simpsons_info_dict</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;Maggie&#39;: [&#39;daughter&#39;, 1], &#39;Marge&#39;: [&#39;mother&#39;, 43], &#39;Homer&#39;: [&#39;father&#39;, 45], &#39;Lisa&#39;: [&#39;daughter&#39;, 10], &#39;Bart&#39;: [&#39;son&#39;, 11]}
</pre></div>
</div>
</section>
<section id="iterators-itertools-package">
<h2>Iterators <code class="docutils literal notranslate"><span class="pre">itertools</span></code> package<a class="headerlink" href="#iterators-itertools-package" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">itertools</span>
</pre></div>
</div>
<p>Example: Cartesian product</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">([[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])])</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[[&#39;a&#39;, 1], [&#39;a&#39;, 2], [&#39;b&#39;, 1], [&#39;b&#39;, 2], [&#39;c&#39;, 1], [&#39;c&#39;, 2]]
</pre></div>
</div>
</section>
<section id="example-use-loop-dictionary-and-set-to-count-words-in-a-sentence">
<h2>Example, use loop, dictionary and set to count words in a sentence<a class="headerlink" href="#example-use-loop-dictionary-and-set-to-count-words-in-a-sentence" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">quote</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;Tick-tow</span>
<span class="s2">our incomes are like our shoes; if too small they gall and pinch us</span>
<span class="s2">but if too large they cause us to stumble and to trip</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">words</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="n">count</span> <span class="o">=</span> <span class="p">{</span><span class="n">word</span><span class="p">:</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">words</span><span class="p">)}</span>

<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="n">count</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="c1"># count[word] = count[word] + 1</span>

<span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="n">freq_veq</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">count</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;they&#39;: 2, &#39;but&#39;: 1, &#39;too&#39;: 2, &#39;gall&#39;: 1, &#39;to&#39;: 2, &#39;small&#39;: 1, &#39;incomes&#39;: 1, &#39;shoes;&#39;: 1, &#39;if&#39;: 2, &#39;our&#39;: 2, &#39;pinch&#39;: 1, &#39;are&#39;: 1, &#39;like&#39;: 1, &#39;stumble&#39;: 1, &#39;Tick-tow&#39;: 1, &#39;us&#39;: 2, &#39;large&#39;: 1, &#39;and&#39;: 2, &#39;trip&#39;: 1, &#39;cause&#39;: 1}
</pre></div>
</div>
</section>
<section id="exceptions-handling">
<h2>Exceptions handling<a class="headerlink" href="#exceptions-handling" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">dct</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>

<span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">dct</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Key </span><span class="si">%s</span><span class="s2"> is missing. Add it with empty value&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
    <span class="n">dct</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">dct</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Key c is missing. Add it with empty value
{&#39;a&#39;: [1, 2], &#39;b&#39;: [4, 5], &#39;c&#39;: []}
</pre></div>
</div>
</section>
</section>
<section id="functions">
<h1>Functions<a class="headerlink" href="#functions" title="Link to this heading">¶</a></h1>
<p>Functions are sets of instructions launched when called upon, they can
have multiple input values and a return value</p>
<p>Function with no arguments and no return values</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">print_text</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;this is text&#39;</span><span class="p">)</span>


<span class="c1"># call the function</span>
<span class="n">print_text</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>this is text
</pre></div>
</div>
<p>Function with one argument and no return values</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">print_this</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>


<span class="c1"># call the function</span>
<span class="n">print_this</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>       <span class="c1"># prints 3</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">print_this</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>   <span class="c1"># prints 3, but doesn&#39;t assign 3 to n</span>
<span class="c1"># because the function has no return statement</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>3
3
None
</pre></div>
</div>
<p><strong>Dynamic typing</strong></p>
<p>Important remarque: <strong>Python is a dynamically typed language</strong>, meaning
that the Python interpreter does type checking at runtime (as opposed to compiled
language that are statically typed). As a consequence, the function behavior, decided,
at execution time, will be different and specific to parameters type.
Python function are polymorphic.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>


<span class="nb">print</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">add</span><span class="p">(</span><span class="s2">&quot;deux&quot;</span><span class="p">,</span> <span class="s2">&quot;trois&quot;</span><span class="p">),</span> <span class="n">add</span><span class="p">([</span><span class="s2">&quot;deux&quot;</span><span class="p">,</span> <span class="s2">&quot;trois&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>5 deuxtrois [&#39;deux&#39;, &#39;trois&#39;, 2, 3]
</pre></div>
</div>
<p><strong>Default arguments</strong></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">power_this</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="n">power</span>


<span class="nb">print</span><span class="p">(</span><span class="n">power_this</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">power_this</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>4 8
</pre></div>
</div>
<p><strong>Docstring</strong> to describe the effect of a function
IDE, ipython (type: ?power_this) to provide function documentation.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">power_this</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the power of a number.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (float): the number</span>
<span class="sd">        power (int, optional): the power. Defaults to 2.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">**</span> <span class="n">power</span>
</pre></div>
</div>
<p><strong>Return several values</strong> as tuple</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">min_max</span><span class="p">(</span><span class="n">nums</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">nums</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>


<span class="c1"># return values can be assigned to a single variable as a tuple</span>
<span class="n">min_max_num</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>         <span class="c1"># min_max_num = (1, 3)</span>

<span class="c1"># return values can be assigned into multiple variables using tuple unpacking</span>
<span class="n">min_num</span><span class="p">,</span> <span class="n">max_num</span> <span class="o">=</span> <span class="n">min_max</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>    <span class="c1"># min_num = 1, max_num = 3</span>
</pre></div>
</div>
<section id="reference-and-copy">
<h2>Reference and copy<a class="headerlink" href="#reference-and-copy" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://levelup.gitconnected.com/understanding-reference-and-copy-in-python-c681341a0cd8">References</a> are used to access objects in memory, here lists.
A single object may have multiple references. Modifying the content of the one reference
will change the content of all other references.</p>
<p>Modify a a reference of a list</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">num</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">same_num</span> <span class="o">=</span> <span class="n">num</span>   <span class="c1"># create a second reference to the same list</span>
<span class="n">same_num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># modifies both &#39;num&#39; and &#39;same_num&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">same_num</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[0, 2, 3] [0, 2, 3]
</pre></div>
</div>
<p>Copies are references to different objects.
Modifying the content of the one reference, will not affect the others.</p>
<p>Modify a copy of a list</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">new_num</span> <span class="o">=</span> <span class="n">num</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">new_num</span> <span class="o">=</span> <span class="n">num</span><span class="p">[:]</span>
<span class="n">new_num</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
<span class="n">new_num</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>  <span class="c1"># modifies &#39;new_num&#39; but not &#39;num&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">new_num</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[0, 2, 3] [-1, 2, 3]
</pre></div>
</div>
<p>Examine objects</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">same_num</span><span class="p">)</span>  <span class="c1"># returns True</span>
<span class="nb">id</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="o">==</span> <span class="nb">id</span><span class="p">(</span><span class="n">new_num</span><span class="p">)</span>  <span class="c1"># returns False</span>
<span class="n">num</span> <span class="ow">is</span> <span class="n">same_num</span>         <span class="c1"># returns True</span>
<span class="n">num</span> <span class="ow">is</span> <span class="n">new_num</span>          <span class="c1"># returns False</span>
<span class="n">num</span> <span class="o">==</span> <span class="n">same_num</span>         <span class="c1"># returns True</span>
<span class="n">num</span> <span class="o">==</span> <span class="n">new_num</span>          <span class="c1"># returns True (their contents are equivalent)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>False
</pre></div>
</div>
<p>Functions’ arguments are references to objects.
Thus functions can modify their arguments with possible side effect.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">change</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">newval</span><span class="p">):</span>
    <span class="n">x</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">newval</span>

<span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">change</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">l</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">newval</span><span class="o">=</span><span class="mi">33</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[0, 33, 2]
</pre></div>
</div>
</section>
<section id="example-function-and-dictionary-comprehension">
<h2>Example: function, and dictionary comprehension<a class="headerlink" href="#example-function-and-dictionary-comprehension" title="Link to this heading">¶</a></h2>
<p>Example of a function <code class="docutils literal notranslate"><span class="pre">join_dict_to_table(dict1,</span> <span class="pre">dict2)</span></code> joining two dictionaries
(intersecting keys) into a table, i.e., a list of tuples, where the first column
is the key, the second and third columns are the values of the dictionaries.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">simpsons_ages_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Homer&#39;</span><span class="p">:</span> <span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;Marge&#39;</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span> <span class="s1">&#39;Bart&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;Lisa&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="n">simpsons_roles_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Homer&#39;</span><span class="p">:</span> <span class="s1">&#39;father&#39;</span><span class="p">,</span> <span class="s1">&#39;Marge&#39;</span><span class="p">:</span> <span class="s1">&#39;mother&#39;</span><span class="p">,</span> <span class="s1">&#39;Bart&#39;</span><span class="p">:</span> <span class="s1">&#39;son&#39;</span><span class="p">,</span>
                       <span class="s1">&#39;Maggie&#39;</span><span class="p">:</span> <span class="s1">&#39;daughter&#39;</span><span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">join_dict_to_table</span><span class="p">(</span><span class="n">dict1</span><span class="p">,</span> <span class="n">dict2</span><span class="p">):</span>
    <span class="n">table</span> <span class="o">=</span> <span class="p">[[</span><span class="n">key</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">dict1</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">dict2</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span>
             <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dict1</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="n">dict2</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
    <span class="k">return</span> <span class="n">table</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Roles:&quot;</span><span class="p">,</span> <span class="n">simpsons_roles_dict</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ages:&quot;</span><span class="p">,</span> <span class="n">simpsons_ages_dict</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Join:&quot;</span><span class="p">,</span> <span class="n">join_dict_to_table</span><span class="p">(</span><span class="n">simpsons_roles_dict</span><span class="p">,</span>
                                  <span class="n">simpsons_ages_dict</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Roles: {&#39;Homer&#39;: &#39;father&#39;, &#39;Marge&#39;: &#39;mother&#39;, &#39;Bart&#39;: &#39;son&#39;, &#39;Maggie&#39;: &#39;daughter&#39;}
Ages: {&#39;Homer&#39;: 45, &#39;Marge&#39;: 43, &#39;Bart&#39;: 11, &#39;Lisa&#39;: 10}
Join: [[&#39;Marge&#39;, &#39;mother&#39;, 43], [&#39;Bart&#39;, &#39;son&#39;, 11], [&#39;Homer&#39;, &#39;father&#39;, 45]]
</pre></div>
</div>
</section>
</section>
<section id="regular-expression">
<h1>Regular expression<a class="headerlink" href="#regular-expression" title="Link to this heading">¶</a></h1>
<p>Regular Expression (RE, or RegEx) allow to search and patterns in strings.
See <a class="reference external" href="https://www.programiz.com/python-programming/regex">this page</a> for the syntax
of the RE patterns.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
</pre></div>
</div>
<p><strong>Usual patterns</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code> period symbol matches any single character (except newline ‘n’).</p></li>
<li><p>pattern``+`` plus symbol matches one or more occurrences of the pattern.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[]</span></code> square brackets specifies a set of characters you wish to match</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[abc]</span></code> matches a, b or c</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[a-c]</span></code> matches a to z</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[0-9]</span></code> matches 0 to 9</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[a-zA-Z0-9]+</span></code> matches words, at least one alphanumeric character (digits and alphabets)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[\w]+</span></code> matches words, at least one alphanumeric character including underscore.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\s</span></code> Matches where a string contains any whitespace character, equivalent to [ tnrfv].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[^\s]</span></code> Caret <code class="docutils literal notranslate"><span class="pre">^</span></code> symbol (the start of a square-bracket) inverts the pattern selection .</p></li>
</ul>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># regex = re.compile(&quot;^.+(firstname:.+)_(lastname:.+)_(mod-.+)&quot;)</span>
<span class="c1"># regex = re.compile(&quot;(firstname:.+)_(lastname:.+)_(mod-.+)&quot;)</span>
</pre></div>
</div>
<p><strong>Compile</strong> (<code class="docutils literal notranslate"><span class="pre">re.compile(string)</span></code>) regular expression with a pattern that
captures the pattern <code class="docutils literal notranslate"><span class="pre">firstname:&lt;subject_id&gt;_lastname:&lt;session_id&gt;</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;firstname:[\w]+_lastname:[\w]+&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/ed203246/git/pystatsml/python_lang/python_lang.py:936: SyntaxWarning: invalid escape sequence &#39;\w&#39;
  pattern = re.compile(&quot;firstname:[\w]+_lastname:[\w]+&quot;)
</pre></div>
</div>
<p><strong>Match</strong> (<code class="docutils literal notranslate"><span class="pre">re.match(string)</span></code>) to be used in test, loop, etc.
Determine if the RE matches <strong>at the beginning</strong> of the string.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">yes_</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;firstname:John_lastname:Doe&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>
<span class="n">no_</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;blahbla_firstname:John_lastname:Doe&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>
<span class="n">no2_</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;OUPS-John_lastname:Doe&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">yes_</span><span class="p">,</span> <span class="n">no_</span><span class="p">,</span> <span class="n">no2_</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True False False
</pre></div>
</div>
<p><strong>Match</strong> (<code class="docutils literal notranslate"><span class="pre">re.search(string)</span></code>) to be used in test, loop, etc.
Determine if the RE matches <strong>at any location</strong> in the string.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">yes_</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;firstname:John_lastname:Doe&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>
<span class="n">yes2_</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
    <span class="s2">&quot;blahbla_firstname:John_lastname:Doe&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>
<span class="n">no_</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">pattern</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;OUPS-John_lastname:Doe&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">False</span>
<span class="nb">print</span><span class="p">(</span><span class="n">yes_</span><span class="p">,</span> <span class="n">yes2_</span><span class="p">,</span> <span class="n">no_</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>True True False
</pre></div>
</div>
<p><strong>Find</strong> (<code class="docutils literal notranslate"><span class="pre">re.findall(string)</span></code>) all substrings where the RE matches,
and returns them as a list.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find the whole pattern within the string</span>
<span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;firstname:[\w]+_lastname:[\w]+&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;firstname:John_lastname:Doe blah blah&quot;</span><span class="p">))</span>

<span class="c1"># Find words</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[a-zA-Z0-9]+&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;firstname:John_lastname:Doe&quot;</span><span class="p">))</span>

<span class="c1"># Find words with including underscore</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[\w]+&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;firstname:John_lastname:Doe&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/ed203246/git/pystatsml/python_lang/python_lang.py:963: SyntaxWarning: invalid escape sequence &#39;\w&#39;
  pattern = re.compile(&quot;firstname:[\w]+_lastname:[\w]+&quot;)
/home/ed203246/git/pystatsml/python_lang/python_lang.py:970: SyntaxWarning: invalid escape sequence &#39;\w&#39;
  print(re.compile(&quot;[\w]+&quot;).findall(&quot;firstname:John_lastname:Doe&quot;))
[&#39;firstname:John_lastname:Doe&#39;]
[&#39;firstname&#39;, &#39;John&#39;, &#39;lastname&#39;, &#39;Doe&#39;]
[&#39;firstname&#39;, &#39;John_lastname&#39;, &#39;Doe&#39;]
</pre></div>
</div>
<p>Extract specific parts of the RE: use parenthesis <code class="docutils literal notranslate"><span class="pre">(part</span> <span class="pre">of</span> <span class="pre">pattern</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">matched)</span></code>
Extract John and Doe, such as John is suffixed with firstname:
and Doe is suffixed with lastname:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;firstname:([\w]+)_lastname:([\w]+)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s2">&quot;firstname:John_lastname:Doe </span><span class="se">\</span>
<span class="s2">    firstname:Bart_lastname:Simpson&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/ed203246/git/pystatsml/python_lang/python_lang.py:978: SyntaxWarning: invalid escape sequence &#39;\w&#39;
  pattern = re.compile(&quot;firstname:([\w]+)_lastname:([\w]+)&quot;)
[(&#39;John&#39;, &#39;Doe&#39;), (&#39;Bart&#39;, &#39;Simpson&#39;)]
</pre></div>
</div>
<p><strong>Split</strong> (<code class="docutils literal notranslate"><span class="pre">re.split(string)</span></code>) splits the string where there is a match and
returns a list of strings where the splits have occurred. Example, match
any non alphanumeric character (digits and alphabets) <code class="docutils literal notranslate"><span class="pre">[^a-zA-Z0-9]</span></code> to split
the string.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[^a-zA-Z0-9]&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;firstname:John_lastname:Doe&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;firstname&#39;, &#39;John&#39;, &#39;lastname&#39;, &#39;Doe&#39;]
</pre></div>
</div>
<p><strong>Substitute</strong> (<code class="docutils literal notranslate"><span class="pre">re.sub(pattern,</span> <span class="pre">replace,</span> <span class="pre">string)</span></code>) returns a string where
matched occurrences are replaced with the content of replace variable.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\s&#39;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;Sentence with white      space&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;\s+&#39;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;Sentence with white      space&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/ed203246/git/pystatsml/python_lang/python_lang.py:995: SyntaxWarning: invalid escape sequence &#39;\s&#39;
  print(re.sub(&#39;\s&#39;, &quot;_&quot;, &quot;Sentence with white      space&quot;))
/home/ed203246/git/pystatsml/python_lang/python_lang.py:996: SyntaxWarning: invalid escape sequence &#39;\s&#39;
  print(re.sub(&#39;\s+&#39;, &quot;_&quot;, &quot;Sentence with white      space&quot;))
Sentence_with_white______space
Sentence_with_white_space
</pre></div>
</div>
<p>Remove all non-alphanumeric characters and space in a string</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[^0-9a-zA-Z\s]+&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;H^&amp;ell`.,|o W]{+orld&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/ed203246/git/pystatsml/python_lang/python_lang.py:1001: SyntaxWarning: invalid escape sequence &#39;\s&#39;
  re.sub(&#39;[^0-9a-zA-Z\s]+&#39;, &#39;&#39;, &#39;H^&amp;ell`.,|o W]{+orld&#39;)

&#39;Hello World&#39;
</pre></div>
</div>
</section>
<section id="system-programming">
<h1>System programming<a class="headerlink" href="#system-programming" title="Link to this heading">¶</a></h1>
<section id="operating-system-interfaces-os">
<h2>Operating system interfaces (os)<a class="headerlink" href="#operating-system-interfaces-os" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
</pre></div>
</div>
<p>Get/set current working directory</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Get the current working directory</span>
<span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span>

<span class="c1"># Set the current working directory</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/home/ed203246/git/pystatsml/python_lang
</pre></div>
</div>
<p>Temporary directory</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
<span class="n">tmpdir</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">gettempdir</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp
</pre></div>
</div>
<p>Join paths</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">mytmpdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;foobar&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a directory</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;foobar&quot;</span><span class="p">,</span> <span class="s2">&quot;plop&quot;</span><span class="p">,</span> <span class="s2">&quot;toto&quot;</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># list containing the names of the entries in the directory given by path.</span>
<span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">mytmpdir</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;myfile.txt&#39;, &#39;plop&#39;]
</pre></div>
</div>
</section>
<section id="file-input-output">
<h2>File input/output<a class="headerlink" href="#file-input-output" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">mytmpdir</span><span class="p">,</span> <span class="s2">&quot;myfile.txt&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Dans python tout est bon&quot;</span><span class="p">,</span> <span class="s2">&quot;Enfin, presque&quot;</span><span class="p">]</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp/foobar/myfile.txt
</pre></div>
</div>
<p>Write line by line</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
<span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">fd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Context manager to automatically close your file</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Read
read one line at a time (entire file does not have to fit into memory)</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>    <span class="c1"># one string per line (including newlines)</span>
<span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>    <span class="c1"># next line</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># read the whole file at once, return a list of lines</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>   <span class="c1"># one list, each line is one string</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># use list comprehension to duplicate readlines without reading entire file at once</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># use a context manager to automatically close your file</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="explore-list-directories">
<h2>Explore, list directories<a class="headerlink" href="#explore-list-directories" title="Link to this heading">¶</a></h2>
<p>Walk through directories and subdirectories <code class="docutils literal notranslate"><span class="pre">os.walk(dir)</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">WD</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;foobar&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">dirpath</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">WD</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">dirnames</span><span class="p">,</span> <span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp/foobar [&#39;plop&#39;] [&#39;myfile.txt&#39;]
/tmp/foobar/plop [&#39;toto&#39;] []
/tmp/foobar/plop/toto [] []
</pre></div>
</div>
<p>Search for a file using a wildcard <code class="docutils literal notranslate"><span class="pre">glob.glob(dir)</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">glob</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;*.txt&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">filenames</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;/tmp/foobar/myfile.txt&#39;, &#39;/tmp/plop2/myfile.txt&#39;]
</pre></div>
</div>
<p>Manipulating file names, basename and extension</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">split_filename_inparts</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">dirname_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">filename_noext_</span><span class="p">,</span> <span class="n">ext_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">basename_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filename_noext_</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dirname_</span><span class="p">,</span> <span class="n">basename_</span><span class="p">,</span> <span class="n">ext_</span>


<span class="nb">print</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;=&gt;&quot;</span><span class="p">,</span> <span class="n">split_filename_inparts</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp/foobar/myfile.txt =&gt; (&#39;/tmp/foobar&#39;, &#39;myfile&#39;, &#39;.txt&#39;)
</pre></div>
</div>
<p>File operations: (recursive) copy, move, test if exists: <code class="docutils literal notranslate"><span class="pre">shutil</span></code> package</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">shutil</span>
</pre></div>
</div>
<p>Copy</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">src</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;foobar&quot;</span><span class="p">,</span>  <span class="s2">&quot;myfile.txt&quot;</span><span class="p">)</span>
<span class="n">dst</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;foobar&quot;</span><span class="p">,</span>  <span class="s2">&quot;plop&quot;</span><span class="p">,</span> <span class="s2">&quot;myfile.txt&quot;</span><span class="p">)</span>
<span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;copy </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>copy /tmp/foobar/myfile.txt to /tmp/foobar/plop/myfile.txt
</pre></div>
</div>
<p>Test if file exists ?</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File </span><span class="si">%s</span><span class="s2"> exists ?&quot;</span> <span class="o">%</span> <span class="n">dst</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">dst</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>File /tmp/foobar/plop/myfile.txt exists ? True
</pre></div>
</div>
<p>Recursive copy,deletion and move</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">src</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;foobar&quot;</span><span class="p">,</span>  <span class="s2">&quot;plop&quot;</span><span class="p">)</span>
<span class="n">dst</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;plop2&quot;</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Copy tree </span><span class="si">%s</span><span class="s2"> under </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">))</span>
    <span class="c1"># Note that by default (dirs_exist_ok=True), meaning that copy will fail</span>
    <span class="c1"># if destination exists.</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">dirs_exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Delete tree </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">dst</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Move tree </span><span class="si">%s</span><span class="s2"> under </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">))</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">move</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">)</span>
<span class="k">except</span> <span class="p">(</span><span class="ne">FileExistsError</span><span class="p">,</span> <span class="ne">FileNotFoundError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Copy tree /tmp/foobar/plop under /tmp/plop2
Delete tree /tmp/plop2
Move tree /tmp/foobar/plop under /tmp/plop2
</pre></div>
</div>
</section>
<section id="command-execution-with-subprocess">
<h2>Command execution with subprocess<a class="headerlink" href="#command-execution-with-subprocess" title="Link to this heading">¶</a></h2>
<p>For more advanced use cases, the underlying Popen interface can be used directly.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">subprocess.run([command,</span> <span class="pre">args*])</span></code></p>
<ul class="simple">
<li><p>Run the command described by args.</p></li>
<li><p>Wait for command to complete</p></li>
<li><p>return a CompletedProcess instance.</p></li>
<li><p>Does not capture stdout or stderr by default. To do so, pass PIPE for the stdout and/or stderr arguments.</p></li>
</ul>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s2">&quot;ls&quot;</span><span class="p">,</span> <span class="s2">&quot;-l&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">returncode</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
<p>Run through the shell</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;ls -l&quot;</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>CompletedProcess(args=&#39;ls -l&#39;, returncode=0)
</pre></div>
</div>
<p>Capture output</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">out</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;ls&quot;</span><span class="p">,</span> <span class="s2">&quot;-a&quot;</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span><span class="p">)</span>
<span class="c1"># out.stdout is a sequence of bytes that should be decoded into a utf-8 string</span>
<span class="nb">print</span><span class="p">(</span><span class="n">out</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;.&#39;, &#39;..&#39;, &#39;bin&#39;, &#39;bin.usr-is-merged&#39;, &#39;boot&#39;]
</pre></div>
</div>
</section>
<section id="multiprocessing-and-multithreading">
<h2>Multiprocessing and multithreading<a class="headerlink" href="#multiprocessing-and-multithreading" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://techdifferences.com/difference-between-multiprocessing-and-multithreading.html">Difference between multiprocessing and multithreading</a>
is essential to perform efficient parallel processing on multi-cores computers.</p>
<blockquote>
<div><p><strong>Multiprocessing</strong></p>
<p>A process is  a program instance that has been loaded into memory
and managed by the operating system.
Process = address space + execution context (thread of control)</p>
<ul class="simple">
<li><p>Process address space is made of (memory) segments for (i) code,
(ii) data (static/global), (iii) heap (dynamic memory allocation),
and the execution stack (functions’ execution context).</p></li>
<li><p>Execution context consists of (i) data registers, (ii) Stack Pointer (SP),
(iii) Program Counter (PC), and (iv) working Registers.</p></li>
</ul>
<p>OS Scheduling of processes: context switching (ie. save/load Execution context)</p>
<p>Pros/cons</p>
<ul class="simple">
<li><p>Context switching expensive.</p></li>
<li><p>(potentially) complex data sharing (not necessary true).</p></li>
<li><p>Cooperating processes - no need for memory protection (separate address spaces).</p></li>
<li><p>Relevant for parallel computation with memory allocation.</p></li>
</ul>
<p><strong>Multithreading</strong></p>
<ul class="simple">
<li><p>Threads share the same address space (Data registers): access to code, heap and (global) data.</p></li>
<li><p>Separate execution stack, PC and Working Registers.</p></li>
</ul>
<p>Pros/cons</p>
<ul class="simple">
<li><p><strong>Faster context switching</strong> only SP, PC and Working Registers.</p></li>
<li><p>Can exploit fine-grain concurrency</p></li>
<li><p>Simple data sharing through the shared address space.</p></li>
<li><p><strong>But most of concurrent memory operations are serialized (blocked)
by the global interpreter lock (GIL)</strong>.
The GIL prevents two threads writing to the same memory at the same time.</p></li>
<li><p>Relevant for GUI, I/O (Network, disk) concurrent operation</p></li>
</ul>
<p><strong>In Python</strong></p>
<ul class="simple">
<li><p><strong>As long the GIL exists favor multiprocessing over multithreading</strong></p></li>
<li><p>Multithreading rely on <code class="docutils literal notranslate"><span class="pre">threading</span></code> module.</p></li>
<li><p>Multiprocessing rely on <code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code> module.</p></li>
</ul>
</div></blockquote>
<p><strong>Example: Random forest</strong></p>
<p>Random forest are the obtained by Majority vote of decision tree on estimated
on bootstrapped samples.</p>
<p>Toy dataset</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_classification</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.tree</span><span class="w"> </span><span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">balanced_accuracy_score</span>

<span class="c1"># Toy dataset</span>
<span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">make_classification</span><span class="p">(</span><span class="n">n_features</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">n_samples</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">n_informative</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                           <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_clusters_per_class</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
                                                    <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>Random forest algorithm:
(i) In parallel, fit decision trees on bootstrapped data samples. Make predictions.
(ii) Majority vote on predictions</p>
<ol class="arabic simple">
<li><p>In parallel, fit decision trees on bootstrapped data sample. Make predictions.</p></li>
</ol>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">boot_decision_tree</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">predictions_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">N</span> <span class="o">=</span> <span class="n">X_train</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">boot_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">N</span><span class="p">),</span> <span class="n">size</span><span class="o">=</span><span class="n">N</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">clf</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">[</span><span class="n">boot_idx</span><span class="p">],</span> <span class="n">y_train</span><span class="p">[</span><span class="n">boot_idx</span><span class="p">])</span>
    <span class="n">y_pred</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">predictions_list</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">predictions_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y_pred</span>
</pre></div>
</div>
<p>Independent runs of decision tree, see variability of predictions</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">y_test_boot</span> <span class="o">=</span> <span class="n">boot_decision_tree</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">balanced_accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_test_boot</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>0.63
0.68
0.63
0.63
0.67
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Majority vote on predictions</p></li>
</ol>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">vote</span><span class="p">(</span><span class="n">predictions</span><span class="p">):</span>
    <span class="n">maj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">apply_along_axis</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">bincount</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
        <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">arr</span><span class="o">=</span><span class="n">predictions</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">maj</span>
</pre></div>
</div>
<p><strong>Sequential execution</strong></p>
<p>Sequentially fit decision tree on bootstrapped samples, then apply majority vote</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">nboot</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">y_test_boot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">([</span><span class="n">boot_decision_tree</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nboot</span><span class="p">)])</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">y_test_vote</span> <span class="o">=</span> <span class="n">vote</span><span class="p">(</span><span class="n">y_test_boot</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Balanced Accuracy: </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">balanced_accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_test_vote</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Sequential execution, elapsed time:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Balanced Accuracy: 0.63
Sequential execution, elapsed time: 1.3796963691711426
</pre></div>
</div>
<p><strong>Multithreading</strong></p>
<p>Concurrent (parallel) execution of the function with two threads.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">threading</span><span class="w"> </span><span class="kn">import</span> <span class="n">Thread</span>

<span class="n">predictions_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">thread1</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">boot_decision_tree</span><span class="p">,</span>
                 <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">predictions_list</span><span class="p">))</span>
<span class="n">thread2</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">boot_decision_tree</span><span class="p">,</span>
                 <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">predictions_list</span><span class="p">))</span>

<span class="c1"># Will execute both in parallel</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">thread1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">thread2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Joins threads back to the parent process</span>
<span class="n">thread1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">thread2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<span class="c1"># Vote on concatenated predictions</span>
<span class="n">y_test_boot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">(</span><span class="n">predictions_list</span><span class="p">)</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">y_test_vote</span> <span class="o">=</span> <span class="n">vote</span><span class="p">(</span><span class="n">y_test_boot</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Balanced Accuracy: </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">balanced_accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_test_vote</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concurrent execution with threads, elapsed time:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Balanced Accuracy: 0.62
Concurrent execution with threads, elapsed time: 0.7034385204315186
</pre></div>
</div>
<p><strong>Multiprocessing</strong></p>
<p>Concurrent (parallel) execution of the function with
processes (jobs) executed in different address (memory) space.
<a class="reference external" href="https://docs.python.org/3/library/multiprocessing.html">Process-based parallelism</a></p>
<p><code class="docutils literal notranslate"><span class="pre">Process()</span></code> for parallel execution and <code class="docutils literal notranslate"><span class="pre">Manager()</span></code> for data sharing</p>
<p><strong>Sharing data between process with Managers</strong>
Therefore, sharing data requires specific mechanism using  .
Managers provide a way to create data which can be shared between
different processes, including sharing over a network between processes
running on different machines. A manager object controls a server process
which manages shared objects.</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">multiprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Process</span><span class="p">,</span> <span class="n">Manager</span>

<span class="n">predictions_list</span> <span class="o">=</span> <span class="n">Manager</span><span class="p">()</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">boot_decision_tree</span><span class="p">,</span>
             <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">predictions_list</span><span class="p">))</span>
<span class="n">p2</span> <span class="o">=</span> <span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">boot_decision_tree</span><span class="p">,</span>
             <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">predictions_list</span><span class="p">))</span>

<span class="c1"># Will execute both in parallel</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">p1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">p2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># Joins processes back to the parent process</span>
<span class="n">p1</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
<span class="n">p2</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<span class="c1"># Vote on concatenated predictions</span>
<span class="n">y_test_boot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">(</span><span class="n">predictions_list</span><span class="p">)</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
<span class="n">y_test_vote</span> <span class="o">=</span> <span class="n">vote</span><span class="p">(</span><span class="n">y_test_boot</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Balanced Accuracy: </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">balanced_accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_test_vote</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concurrent execution with processes, elapsed time:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Balanced Accuracy: 0.64
Concurrent execution with processes, elapsed time: 0.6105175018310547
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Pool()</span></code> of <strong>workers (processes or Jobs)</strong> for concurrent (parallel) execution of multiples
tasks.
Pool can be used when <em>N</em> independent tasks need to be executed in parallel, when there are
more tasks than cores on the computer.</p>
<ol class="arabic simple">
<li><p>Initialize a <a class="reference external" href="https://superfastpython.com/multiprocessing-pool-map-multiple-arguments/">Pool(), map(), apply_async(),</a>
of <em>P</em> workers (Process, or Jobs), where <em>P</em> &lt; number of cores in the computer.
Use <cite>cpu_count</cite> to get the number of logical cores in the current system,
See: <a class="reference external" href="https://superfastpython.com/number-of-cpus-python/">Number of CPUs and Cores in Python</a>.</p></li>
<li><p>Map <em>N</em> tasks to the <em>P</em> workers, here we use the function
<a class="reference external" href="https://superfastpython.com/multiprocessing-pool-apply_async/">Pool.apply_async()</a> that runs the
jobs asynchronously. Asynchronous means that calling <cite>pool.apply_async</cite> does not block the execution
of the caller that carry on, i.e., it returns immediately with a <cite>AsyncResult</cite> object for the task.</p></li>
</ol>
<p>that the caller (than runs the sub-processes) is not blocked by the
to the process pool does not block, allowing the caller that issued the task to carry on.#
3. Wait for all jobs to complete <cite>pool.join()</cite>
4. Collect the results</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">multiprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pool</span><span class="p">,</span> <span class="n">cpu_count</span>
<span class="c1"># Numbers of logical cores in the current system.</span>
<span class="c1"># Rule of thumb: Divide by 2 to get nb of physical cores</span>
<span class="n">njobs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cpu_count</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">ntasks</span> <span class="o">=</span> <span class="mi">12</span>

<span class="n">pool</span> <span class="o">=</span> <span class="n">Pool</span><span class="p">(</span><span class="n">njobs</span><span class="p">)</span>
<span class="c1"># Run multiple tasks each with multiple arguments</span>
<span class="n">async_results</span> <span class="o">=</span> <span class="p">[</span><span class="n">pool</span><span class="o">.</span><span class="n">apply_async</span><span class="p">(</span><span class="n">boot_decision_tree</span><span class="p">,</span>
                                  <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">))</span>
                 <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ntasks</span><span class="p">)]</span>

<span class="c1"># Close the process pool &amp; wait for all jobs to complete</span>
<span class="n">pool</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">pool</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>

<span class="c1"># Collect the results</span>
<span class="n">y_test_boot</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dstack</span><span class="p">([</span><span class="n">ar</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="k">for</span> <span class="n">ar</span> <span class="ow">in</span> <span class="n">async_results</span><span class="p">])</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>

<span class="c1"># Vote on concatenated predictions</span>

<span class="n">y_test_vote</span> <span class="o">=</span> <span class="n">vote</span><span class="p">(</span><span class="n">y_test_boot</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Balanced Accuracy: </span><span class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">balanced_accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">y_test_vote</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Concurrent execution with processes, elapsed time:&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Balanced Accuracy: 0.64
Concurrent execution with processes, elapsed time: 1.761357069015503
</pre></div>
</div>
</section>
</section>
<section id="scripts-and-argument-parsing">
<h1>Scripts and argument parsing<a class="headerlink" href="#scripts-and-argument-parsing" title="Link to this heading">¶</a></h1>
<p>Example, the word count script</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os.path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># parse command line options</span>
    <span class="n">output</span> <span class="o">=</span> <span class="s2">&quot;word_count.csv&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--input&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;list of input files.&#39;</span><span class="p">,</span>
                        <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="s1">&#39;--output&#39;</span><span class="p">,</span>
                        <span class="n">help</span><span class="o">=</span><span class="s1">&#39;output csv file (default </span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">output</span><span class="p">,</span>
                        <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">output</span><span class="p">)</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">input</span> <span class="ow">is</span> <span class="kc">None</span> <span class="p">:</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
        <span class="k">raise</span> <span class="ne">SystemExit</span><span class="p">(</span><span class="s2">&quot;Error: input files are missing&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">filenames</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">options</span><span class="o">.</span><span class="n">input</span> <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">f</span><span class="p">)]</span>

    <span class="c1"># Match words</span>
    <span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[a-zA-Z]+&quot;</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
        <span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fd</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">regex</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">()):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">count</span><span class="p">:</span>
                    <span class="n">count</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">count</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>

    <span class="c1"># Pandas</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="n">k</span><span class="p">,</span> <span class="n">count</span><span class="p">[</span><span class="n">k</span><span class="p">]]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">count</span><span class="p">],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;word&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">])</span>
    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">options</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="networking">
<h1>Networking<a class="headerlink" href="#networking" title="Link to this heading">¶</a></h1>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO</span>
</pre></div>
</div>
<section id="ftp">
<h2>FTP<a class="headerlink" href="#ftp" title="Link to this heading">¶</a></h2>
<p>FTP with <code class="docutils literal notranslate"><span class="pre">ftplib</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">ftplib</span>

<span class="n">ftp</span> <span class="o">=</span> <span class="n">ftplib</span><span class="o">.</span><span class="n">FTP</span><span class="p">(</span><span class="s2">&quot;ftp.cea.fr&quot;</span><span class="p">)</span>
<span class="n">ftp</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<span class="n">ftp</span><span class="o">.</span><span class="n">cwd</span><span class="p">(</span><span class="s1">&#39;/pub/unati/people/educhesnay/pystatml&#39;</span><span class="p">)</span>
<span class="n">ftp</span><span class="o">.</span><span class="n">retrlines</span><span class="p">(</span><span class="s1">&#39;LIST&#39;</span><span class="p">)</span>

<span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;README.md&quot;</span><span class="p">),</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span>
<span class="n">ftp</span><span class="o">.</span><span class="n">retrbinary</span><span class="p">(</span><span class="s1">&#39;RETR README.md&#39;</span><span class="p">,</span> <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">)</span>
<span class="n">fd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">ftp</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>-rwxrwxr-x    1 ftp      ftp          3019 Oct 16  2019 README.md
-rwxrwxr-x    1 ftp      ftp      10672252 Dec 18  2020 StatisticsMachineLearningPython.pdf
-rwxrwxr-x    1 ftp      ftp       9676120 Nov 12  2020 StatisticsMachineLearningPythonDraft.pdf
-rwxrwxr-x    1 ftp      ftp       9798485 Jul 08  2020 StatisticsMachineLearningPythonDraft_202007.pdf

&#39;221 Goodbye.&#39;
</pre></div>
</div>
<p>FTP file download with <code class="docutils literal notranslate"><span class="pre">urllib</span></code></p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">urllib</span>
<span class="n">ftp_url</span> <span class="o">=</span> <span class="s1">&#39;ftp://ftp.cea.fr/pub/unati/people/educhesnay/pystatml/README.md&#39;</span>
<span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">ftp_url</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">tmpdir</span><span class="p">,</span> <span class="s2">&quot;README2.md&quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(&#39;/tmp/README2.md&#39;, &lt;email.message.Message object at 0x733805637390&gt;)
</pre></div>
</div>
</section>
<section id="http">
<h2>HTTP<a class="headerlink" href="#http" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO</span>
</pre></div>
</div>
</section>
<section id="sockets">
<h2>Sockets<a class="headerlink" href="#sockets" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO</span>
</pre></div>
</div>
</section>
<section id="xmlrpc">
<h2>xmlrpc<a class="headerlink" href="#xmlrpc" title="Link to this heading">¶</a></h2>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="c1"># TODO</span>
</pre></div>
</div>
</section>
</section>
<section id="object-oriented-programming-oop">
<h1>Object Oriented Programming (OOP)<a class="headerlink" href="#object-oriented-programming-oop" title="Link to this heading">¶</a></h1>
<p><strong>Sources</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="http://python-textbok.readthedocs.org/en/latest/Object_Oriented_Programming.html">http://python-textbok.readthedocs.org/en/latest/Object_Oriented_Programming.html</a></p></li>
</ul>
<p><strong>Principles</strong></p>
<ul class="simple">
<li><p><strong>Encapsulate</strong> data (attributes) and code (methods) into objects.</p></li>
<li><p><strong>Class</strong> = template or blueprint that can be used to create objects.</p></li>
<li><p>An <strong>object</strong> is a specific instance of a class.</p></li>
<li><p><strong>Inheritance</strong>: OOP allows classes to inherit commonly used state
and behavior from other classes. Reduce code duplication</p></li>
<li><p><strong>Polymorphism</strong>: (usually obtained through polymorphism) calling
code is agnostic as to whether an object belongs to a parent class or
one of its descendants (abstraction, modularity). The same method
called on 2 objects of 2 different classes will behave differently.</p></li>
</ul>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Shape2D</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

<span class="c1"># __init__ is a special method called the constructor</span>


<span class="c1"># Inheritance + Encapsulation</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Square</span><span class="p">(</span><span class="n">Shape2D</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">**</span> <span class="mi">2</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Disk</span><span class="p">(</span><span class="n">Shape2D</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">radius</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">area</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">**</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Object creation</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">square</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Call a method of the object</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">square</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
<p>More sophisticated use</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="n">shapes</span> <span class="o">=</span> <span class="p">[</span><span class="n">Square</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">Disk</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>

<span class="c1"># Polymorphism</span>
<span class="nb">print</span><span class="p">([</span><span class="n">s</span><span class="o">.</span><span class="n">area</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">shapes</span><span class="p">])</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">Shape2D</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">s</span><span class="o">.</span><span class="n">area</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">NotImplementedError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NotImplementedError&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[4, 28.274333882308138]
NotImplementedError
</pre></div>
</div>
</section>
<section id="style-guide-for-python-programming">
<h1>Style guide for Python programming<a class="headerlink" href="#style-guide-for-python-programming" title="Link to this heading">¶</a></h1>
<p>See <a class="reference external" href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a></p>
<ul class="simple">
<li><p>Spaces (four) are the preferred indentation method.</p></li>
<li><p>Two blank lines for top level function or classes definition.</p></li>
<li><p>One blank line to indicate logical sections.</p></li>
<li><p>Never use: <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">lib</span> <span class="pre">import</span> <span class="pre">*</span></code></p></li>
<li><p>Bad: <code class="docutils literal notranslate"><span class="pre">Capitalized_Words_With_Underscores</span></code></p></li>
<li><p>Function and Variable Names: <code class="docutils literal notranslate"><span class="pre">lower_case_with_underscores</span></code></p></li>
<li><p>Class Names: <code class="docutils literal notranslate"><span class="pre">CapitalizedWords</span></code> (aka: <code class="docutils literal notranslate"><span class="pre">CamelCase</span></code>)</p></li>
</ul>
</section>
<section id="documenting">
<h1>Documenting<a class="headerlink" href="#documenting" title="Link to this heading">¶</a></h1>
<p>See <a class="reference external" href="https://realpython.com/documenting-python-code//">Documenting Python</a>
Documenting = comments + docstrings (Python documentation string)</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.datacamp.com/community/tutorials/docstrings-python">Docstrings</a>
are use as documentation for the class, module, and packages.
See it as “living documentation”.</p></li>
<li><p>Comments are  used to explain non-obvious portions of the code. “Dead documentation”.</p></li>
</ul>
<p>Docstrings for functions (same for classes and methods):</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">my_function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function ...</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    a : float</span>
<span class="sd">        First operand.</span>
<span class="sd">    b : float, optional</span>
<span class="sd">        Second operand. The default is 2.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Sum of operands.</span>

<span class="sd">    Example</span>
<span class="sd">    -------</span>
<span class="sd">    &gt;&gt;&gt; my_function(3)</span>
<span class="sd">    5</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Add a with b (this is a comment)</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>


<span class="nb">print</span><span class="p">(</span><span class="n">help</span><span class="p">(</span><span class="n">my_function</span><span class="p">))</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Help on function my_function in module __main__:

my_function(a, b=2)
    This function ...

    Parameters
    ----------
    a : float
        First operand.
    b : float, optional
        Second operand. The default is 2.

    Returns
    -------
    Sum of operands.

    Example
    -------
    &gt;&gt;&gt; my_function(3)
    5

None
</pre></div>
</div>
<p>Docstrings for scripts:</p>
<p>At the begining of a script add a pream:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Thu Nov 14 12:08:41 CET 2019</span>

<span class="sd">@author: firstname.lastname@email.com</span>

<span class="sd">Some description</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
<section id="modules-and-packages">
<h1>Modules and packages<a class="headerlink" href="#modules-and-packages" title="Link to this heading">¶</a></h1>
<p>Python <a class="reference external" href="https://docs.python.org/3/tutorial/modules.html">packages and modules</a>
structure python code into modular “libraries” to be shared.</p>
<section id="package">
<h2>Package<a class="headerlink" href="#package" title="Link to this heading">¶</a></h2>
<p>Packages are a way of structuring Python’s module namespace by using “dotted module names”.
A package is a directory (here, <code class="docutils literal notranslate"><span class="pre">stat_pkg</span></code>) containing a <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file.</p>
<p>Example, <code class="docutils literal notranslate"><span class="pre">package</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>stat_pkg/
├── __init__.py
└── datasets_mod.py
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> can be empty.
Or it can be used to define the package API, i.e., the modules (<code class="docutils literal notranslate"><span class="pre">*.py</span></code> files)
that are exported and those that remain internal.</p>
<p>Example, file <code class="docutils literal notranslate"><span class="pre">stat_pkg/__init__.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1) import function for modules in the packages</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.module</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_regression</span>

<span class="c1"># 2) Make them visible in the package</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;make_regression&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="module">
<h2>Module<a class="headerlink" href="#module" title="Link to this heading">¶</a></h2>
<p>A module is a python file.
Example, <code class="docutils literal notranslate"><span class="pre">stat_pkg/datasets_mod.py</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="k">def</span><span class="w"> </span><span class="nf">make_regression</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">n_features</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">add_intercept</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coef</span>
</pre></div>
</div>
<p>Usage</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">stat_pkg</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pkg</span>

<span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coef</span> <span class="o">=</span> <span class="n">pkg</span><span class="o">.</span><span class="n">make_regression</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>(10, 2)
</pre></div>
</div>
</section>
<section id="the-search-path">
<h2>The search path<a class="headerlink" href="#the-search-path" title="Link to this heading">¶</a></h2>
<p>With a directive like <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">stat_pkg</span></code>, Python will searches for</p>
<ul class="simple">
<li><p>a module, file named <code class="docutils literal notranslate"><span class="pre">stat_pkg.py</span></code> or,</p></li>
<li><p>a package, directory named <code class="docutils literal notranslate"><span class="pre">stat_pkg</span></code> containing a <code class="docutils literal notranslate"><span class="pre">stat_pkg/__init__.py</span></code> file.</p></li>
</ul>
<p>Python will search in a list of directories given by the variable
<code class="docutils literal notranslate"><span class="pre">sys.path</span></code>. This variable is initialized from these locations:</p>
<blockquote>
<div><ul class="simple">
<li><p>The directory containing the input script (or the current directory when no file is specified).</p></li>
<li><p><strong>``PYTHONPATH``</strong> (a list of directory names, with the same syntax as the shell variable <code class="docutils literal notranslate"><span class="pre">PATH</span></code>).</p></li>
</ul>
</div></blockquote>
<p>In our case, to be able to import <code class="docutils literal notranslate"><span class="pre">stat_pkg</span></code>, the parent directory of <code class="docutils literal notranslate"><span class="pre">stat_pkg</span></code>
must be in <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>.
You can modify <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> by any method, or access it via <code class="docutils literal notranslate"><span class="pre">sys</span></code> package, example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;/home/ed203246/git/pystatsml/python_lang&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="unit-testing">
<h1>Unit testing<a class="headerlink" href="#unit-testing" title="Link to this heading">¶</a></h1>
<p>When developing a library (e.g., a python package) that is bound to evolve and being corrected, we want to ensure that:
(i) The code correctly implements some expected functionalities;
(ii) the modifications and additions don’t break those functionalities;</p>
<p>Unit testing is a framework to asses to those two points. See sources:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/unittest.html">Unit testing reference doc</a></p></li>
<li><p><a class="reference external" href="https://realpython.com/python-testing/">Getting Started With Testing in Python</a></p></li>
</ul>
<section id="unittest-test-your-code">
<h2>unittest: test your code<a class="headerlink" href="#unittest-test-your-code" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Write unit tests (test cases)</p></li>
</ol>
<p>In a directory usually called <code class="docutils literal notranslate"><span class="pre">tests</span></code> create a <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase">test case</a>, i.e., a python file
<code class="docutils literal notranslate"><span class="pre">test_datasets_mod.py</span></code> (general syntax is <code class="docutils literal notranslate"><span class="pre">test_&lt;mymodule&gt;.py</span></code>) that will execute some
functionalities of the module and test if the output are as expected.
<cite>test_datasets_mod.py</cite> file contains specific directives:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">unittest</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">TestDatasets(unittest.TestCase)</span></code>, the test case class. The general syntax is <code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">Test&lt;MyModule&gt;(unittest.TestCase)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">test_make_regression(self)</span></code>, test a function of an element of the module. The general syntax is <code class="docutils literal notranslate"><span class="pre">test_&lt;my</span> <span class="pre">function&gt;(self)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">self.assertTrue(np.allclose(X.shape,</span> <span class="pre">(10,</span> <span class="pre">4)))</span></code>, test a specific functionality. The general syntax is <code class="docutils literal notranslate"><span class="pre">self.assert&lt;True|Equal|...&gt;(&lt;some</span> <span class="pre">boolean</span> <span class="pre">expression&gt;)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unittest.main()</span></code>, where tests should be executed.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">unittest</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">stat_pkg</span><span class="w"> </span><span class="kn">import</span> <span class="n">make_regression</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TestDatasets</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_make_regression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coefs</span> <span class="o">=</span> <span class="n">make_regression</span><span class="p">(</span><span class="n">n_samples</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">n_features</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                                      <span class="n">add_intercept</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">allclose</span><span class="p">(</span><span class="n">coefs</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="p">)))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Run the tests  (test runner)</p></li>
</ol>
<p>The <a class="reference external" href="https://wiki.python.org/moin/PythonTestingToolsTaxonomy">test runner</a>
orchestrates the execution of tests and provides the outcome to the user.
Many <a class="reference external" href="https://blog.kortar.org/?p=370">test runners</a> are available.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/unittest.html">unittest</a> is the first unit test framework,
it comes with Python standard library.
It employs an object-oriented approach, grouping tests into classes known as test cases,
each containing distinct methods representing individual tests.</p>
<p>Unitest generally requires that tests are organized as importable modules,
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#command-line-interface">see details</a>.
Here, we do not introduce this complexity: we directly execute a test file that isn’t importable
as a module.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">tests</span><span class="o">/</span><span class="n">test_datasets_mod</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p><a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest-test-discovery">Unittest test discovery</a>:
(<code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">unittest</span> <span class="pre">discover</span></code>) within (<code class="docutils literal notranslate"><span class="pre">-s</span></code>) <code class="docutils literal notranslate"><span class="pre">tests</span></code> directory, with verbose (<code class="docutils literal notranslate"><span class="pre">-v</span></code>) outputs.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">unittest</span> <span class="n">discover</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">s</span> <span class="n">tests</span>
</pre></div>
</div>
</section>
<section id="doctest-add-unit-tests-in-docstring">
<h2>Doctest: add unit tests in docstring<a class="headerlink" href="#doctest-add-unit-tests-in-docstring" title="Link to this heading">¶</a></h2>
<p><a class="reference external" href="https://docs.python.org/3/library/doctest.html">Doctest</a> is an inbuilt test framework that comes bundled with Python by default.
The doctest module searches for code fragments that resemble interactive Python sessions and runs those sessions to confirm they operate as shown.
It promotes <a class="reference external" href="https://medium.com/&#64;muirujackson/python-test-driven-development-6235c479baa2">Test-driven (TDD) methodology</a>.</p>
<p>1) Add doc test in the docstrings,
see <a class="reference external" href="https://github.com/duchesnay/pystatsml/blob/master/python_lang/stat_pkg/supervised_models.py">python stat_pkg/supervised_models.py</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LinearRegression</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Ordinary least squares Linear Regression.</span>
<span class="sd">    ...</span>
<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import numpy as np</span>
<span class="sd">    &gt;&gt;&gt; from stat_pkg import LinearRegression</span>
<span class="sd">    &gt;&gt;&gt; X = np.array([[1, 1], [1, 2], [2, 2], [2, 3]])</span>
<span class="sd">    &gt;&gt;&gt; # y = 1 * x_0 + 2 * x_1 + 3</span>
<span class="sd">    &gt;&gt;&gt; y = np.dot(X, np.array([1, 2])) + 3</span>
<span class="sd">    &gt;&gt;&gt; reg = LinearRegression().fit(X, y)</span>
<span class="sd">    &gt;&gt;&gt; reg.coef_</span>
<span class="sd">    array([3., 1., 2.0])</span>
<span class="sd">    &gt;&gt;&gt; reg.predict(np.array([[3, 5]]))</span>
<span class="sd">    array([16.])</span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fit_intercept</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fit_intercept</span> <span class="o">=</span> <span class="n">fit_intercept</span>
<span class="o">...</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Add the call to doctest module ad the end of the python file:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">doctest</span>
    <span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Run doc tests:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">stat_pkg</span><span class="o">/</span><span class="n">supervised_models</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Test failed with the output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">**********************************************************************</span>
<span class="n">File</span> <span class="s2">&quot;.../supervised_models.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">36</span><span class="p">,</span> <span class="ow">in</span> <span class="n">__main__</span><span class="o">.</span><span class="n">LinearRegression</span>
<span class="n">Failed</span> <span class="n">example</span><span class="p">:</span>
    <span class="n">reg</span><span class="o">.</span><span class="n">coef_</span>
<span class="n">Expected</span><span class="p">:</span>
    <span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">])</span>
<span class="n">Got</span><span class="p">:</span>
    <span class="n">array</span><span class="p">([</span><span class="mf">3.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">])</span>
<span class="o">**********************************************************************</span>
<span class="mi">1</span> <span class="n">items</span> <span class="n">had</span> <span class="n">failures</span><span class="p">:</span>
   <span class="mi">1</span> <span class="n">of</span>   <span class="mi">7</span> <span class="ow">in</span> <span class="n">__main__</span><span class="o">.</span><span class="n">LinearRegression</span>
<span class="o">***</span><span class="n">Test</span> <span class="n">Failed</span><span class="o">***</span> <span class="mi">1</span> <span class="n">failures</span><span class="o">.</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
</section>
<section id="exercises">
<h1>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">¶</a></h1>
<section id="exercise-1-functions">
<h2>Exercise 1: functions<a class="headerlink" href="#exercise-1-functions" title="Link to this heading">¶</a></h2>
<p>Create a function that acts as a simple calculator taking three parameters:
the two operand and the operation in “+”, “-”, and “*”. As default use “+”.
If the operation is misspecified, return a error message Ex: <code class="docutils literal notranslate"><span class="pre">calc(4,5,&quot;*&quot;)</span></code> returns 20 Ex:
<code class="docutils literal notranslate"><span class="pre">calc(3,5)</span></code> returns 8 Ex: <code class="docutils literal notranslate"><span class="pre">calc(1,</span> <span class="pre">2,</span> <span class="pre">&quot;something&quot;)</span></code> returns error
message</p>
</section>
<section id="exercise-2-functions-list-loop">
<h2>Exercise 2: functions + list + loop<a class="headerlink" href="#exercise-2-functions-list-loop" title="Link to this heading">¶</a></h2>
<p>Given a list of numbers, return a list where all adjacent duplicate
elements have been reduced to a single element. Ex: <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">2]</span></code>
returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">2]</span></code>. You may create a new list or modify the passed
in list.</p>
<p>Remove all duplicate values (adjacent or not) Ex: <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">2]</span></code>
returns <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></p>
</section>
<section id="exercise-3-file-i-o">
<h2>Exercise 3: File I/O<a class="headerlink" href="#exercise-3-file-i-o" title="Link to this heading">¶</a></h2>
<p>1. Copy/paste the BSD 4 clause license (<a class="reference external" href="https://en.wikipedia.org/wiki/BSD_licenses">https://en.wikipedia.org/wiki/BSD_licenses</a>)
into a text file. Read, the file and count the occurrences of each
word within the file. Store the words’ occurrence number in a dictionary.</p>
<p>2. Write an executable python command <code class="docutils literal notranslate"><span class="pre">count_words.py</span></code> that parse
a list of input files provided after <code class="docutils literal notranslate"><span class="pre">--input</span></code> parameter.
The dictionary of occurrence is save in a csv file provides by <code class="docutils literal notranslate"><span class="pre">--output</span></code>.
with default value word_count.csv.
Use:
- open
- regular expression
- argparse (<a class="reference external" href="https://docs.python.org/3/howto/argparse.html">https://docs.python.org/3/howto/argparse.html</a>)</p>
</section>
<section id="exercise-4-oop">
<h2>Exercise 4: OOP<a class="headerlink" href="#exercise-4-oop" title="Link to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Create a class <code class="docutils literal notranslate"><span class="pre">Employee</span></code> with 2 attributes provided in the
constructor: <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">years_of_service</span></code>. With one method
<code class="docutils literal notranslate"><span class="pre">salary</span></code> with is obtained by <code class="docutils literal notranslate"><span class="pre">1500</span> <span class="pre">+</span> <span class="pre">100</span> <span class="pre">*</span> <span class="pre">years_of_service</span></code>.</p></li>
<li><p>Create a subclass <code class="docutils literal notranslate"><span class="pre">Manager</span></code> which redefine <code class="docutils literal notranslate"><span class="pre">salary</span></code> method
<code class="docutils literal notranslate"><span class="pre">2500</span> <span class="pre">+</span> <span class="pre">120</span> <span class="pre">*</span> <span class="pre">years_of_service</span></code>.</p></li>
<li><p>Create a small dictionary-nosed database where the key is the
employee’s name. Populate the database with: samples =
Employee(‘lucy’, 3), Employee(‘john’, 1), Manager(‘julie’, 10),
Manager(‘paul’, 3)</p></li>
<li><p>Return a table of made name, salary rows, i.e. a list of list [[name,
salary]]</p></li>
<li><p>Compute the average salary</p></li>
</ol>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> (0 minutes 9.373 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-gallery-python-lang-py">
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/c4275fe2e0574ad0ea500e359b4cfa73/python_lang.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">python_lang.ipynb</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/70ad7197a55ebdc2906eed784a626f1a/python_lang.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">python_lang.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-zip docutils container">
<p><a class="reference download internal" download="" href="../_downloads/df51d80dd6463753abc251053cfe4158/python_lang.zip"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">zipped:</span> <span class="pre">python_lang.zip</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Import libraries</a></li>
<li><a class="reference internal" href="#basic-operations">Basic operations</a></li>
<li><a class="reference internal" href="#data-types">Data types</a><ul>
<li><a class="reference internal" href="#lists">Lists</a></li>
<li><a class="reference internal" href="#tuples">Tuples</a></li>
<li><a class="reference internal" href="#strings">Strings</a></li>
<li><a class="reference internal" href="#dictionaries">Dictionaries</a></li>
<li><a class="reference internal" href="#sets">Sets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#execution-control-statements">Execution control statements</a><ul>
<li><a class="reference internal" href="#conditional-statements">Conditional statements</a></li>
<li><a class="reference internal" href="#loops">Loops</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-comprehensions-iterators-etc">List comprehensions, iterators, etc.</a><ul>
<li><a class="reference internal" href="#list-comprehensions">List comprehensions</a></li>
<li><a class="reference internal" href="#set-comprehension">Set comprehension</a></li>
<li><a class="reference internal" href="#dictionary-comprehension">Dictionary comprehension</a></li>
<li><a class="reference internal" href="#iterators-itertools-package">Iterators <code class="docutils literal notranslate"><span class="pre">itertools</span></code> package</a></li>
<li><a class="reference internal" href="#example-use-loop-dictionary-and-set-to-count-words-in-a-sentence">Example, use loop, dictionary and set to count words in a sentence</a></li>
<li><a class="reference internal" href="#exceptions-handling">Exceptions handling</a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions">Functions</a><ul>
<li><a class="reference internal" href="#reference-and-copy">Reference and copy</a></li>
<li><a class="reference internal" href="#example-function-and-dictionary-comprehension">Example: function, and dictionary comprehension</a></li>
</ul>
</li>
<li><a class="reference internal" href="#regular-expression">Regular expression</a></li>
<li><a class="reference internal" href="#system-programming">System programming</a><ul>
<li><a class="reference internal" href="#operating-system-interfaces-os">Operating system interfaces (os)</a></li>
<li><a class="reference internal" href="#file-input-output">File input/output</a></li>
<li><a class="reference internal" href="#explore-list-directories">Explore, list directories</a></li>
<li><a class="reference internal" href="#command-execution-with-subprocess">Command execution with subprocess</a></li>
<li><a class="reference internal" href="#multiprocessing-and-multithreading">Multiprocessing and multithreading</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scripts-and-argument-parsing">Scripts and argument parsing</a></li>
<li><a class="reference internal" href="#networking">Networking</a><ul>
<li><a class="reference internal" href="#ftp">FTP</a></li>
<li><a class="reference internal" href="#http">HTTP</a></li>
<li><a class="reference internal" href="#sockets">Sockets</a></li>
<li><a class="reference internal" href="#xmlrpc">xmlrpc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#object-oriented-programming-oop">Object Oriented Programming (OOP)</a></li>
<li><a class="reference internal" href="#style-guide-for-python-programming">Style guide for Python programming</a></li>
<li><a class="reference internal" href="#documenting">Documenting</a></li>
<li><a class="reference internal" href="#modules-and-packages">Modules and packages</a><ul>
<li><a class="reference internal" href="#package">Package</a></li>
<li><a class="reference internal" href="#module">Module</a></li>
<li><a class="reference internal" href="#the-search-path">The search path</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unit-testing">Unit testing</a><ul>
<li><a class="reference internal" href="#unittest-test-your-code">unittest: test your code</a></li>
<li><a class="reference internal" href="#doctest-add-unit-tests-in-docstring">Doctest: add unit tests in docstring</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercises">Exercises</a><ul>
<li><a class="reference internal" href="#exercise-1-functions">Exercise 1: functions</a></li>
<li><a class="reference internal" href="#exercise-2-functions-list-loop">Exercise 2: functions + list + loop</a></li>
<li><a class="reference internal" href="#exercise-3-file-i-o">Exercise 3: File I/O</a></li>
<li><a class="reference internal" href="#exercise-4-oop">Exercise 4: OOP</a></li>
</ul>
</li>
</ul>

  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/auto_gallery/python_lang.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2020, Edouard Duchesnay, NeuroSpin CEA Université Paris-Saclay, France.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/auto_gallery/python_lang.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>